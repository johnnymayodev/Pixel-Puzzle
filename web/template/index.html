<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pixel Puzzle</title>
  </head>
  <body>
    <img src="static/imgs/apple_blurry.jpg" alt="This is the image" />
    <input type="text" name="name" id="name" />
    <button id="submit">Submit</button>
  </body>
  <script>
    var guess = "";
    var wrong_guesses = 0;

    function send_guess(guess) {
      fetch("/guess/" + guess)
        .then(function (response) {
          return response.text();
        })
        .then(function (data) {
          console.log("Response from server: " + data);
          check_guess(data);
        });
    }

    function check_guess(guess) {
      if (guess === "CORRECT") {
        alert("You got it!");
      } else {
        alert("Try again!");
        wrong_guesses++;

        if (wrong_guesses === 2) {
          // make image less blurry
        }

        if (wrong_guesses === 3) {
          // give category hint
        }

        if (wrong_guesses === 4) {
          // add color to image
        }

        if (wrong_guesses === 5) {
          // make image less blurry
        }

        if (wrong_guesses === 6) {
          // fail?
        }

      }
    }

    document.getElementById("submit").addEventListener("click", function () {
      if (document.getElementById("name").value !== "") {
        guess = document.getElementById("name").value;
        send_guess(guess);
      }
    });
  </script>
</html>
